<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Shared API Routes - UAMAS API Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <nav><a href="index.html">‚Üê Back to Main Docs</a></nav>
    <h1>Shared API Routes</h1>
    <section>
        <p>This section documents API endpoints that are accessible to all authenticated users or are public.</p>
        <div class="endpoint">
            <h3>POST /auth/login</h3>
            <p><strong>Description:</strong> Route for all user login.</p>
            <pre><strong>Request:</strong>
POST http://localhost:8080/api/v1/auth/login

<strong>Request Body:</strong>
{
    "email": "e...@yahoo.com",
    "password": "e...@2025"
}

<strong>Response:</strong>
{
    "access_token": "eyJhbGciO...",
    "refresh_token": "eyJh...",
    "role": "admin"
}
</pre>
        </div>
        <div class="endpoint">
            <h3>POST /auth/reset-password</h3>
            <p><strong>Description:</strong> Resetting password for all users.<br>
                <strong>Note:</strong> You must include <code>credentials: include</code> when sending the request.
            </p>
            <pre><strong>Request:</strong>
POST http://localhost:8080/api/v1/auth/reset-password

<strong>Request Body:</strong>
{
    "email": "e...@yahoo.com",
    "new_password": "e...@2025?"
}

<strong>Response:</strong>
{
    "message": "Password reset successfully. Check your email."
}
</pre>
        </div>
        <div class="endpoint">
            <h3>GET /auth/logout</h3>
            <p><strong>Description:</strong> Logout route for all users.<br>
                <strong>Note:</strong> You must include <code>credentials: include</code> when sending the request.
            </p>
            <pre><strong>Request:</strong>
GET http://localhost:8080/api/v1/auth/logout

<strong>Response:</strong>
{
    "message": "Successfully logged out"
}
</pre>
        </div>
        <div class="endpoint">
            <h3>GET /auth/me</h3>
            <p><strong>Description:</strong> Get current user profile (response below is for lecturer login).<br>
                <strong>Note:</strong> You must include <code>credentials: include</code> when sending the request.
            </p>
            <pre><strong>Request:</strong>
GET http://localhost:8080/api/v1/auth/me

<strong>Response (Lecturer):</strong>
{
    "courses": [
        {
            "code": "CS",
            "department": "Computer Science",
            "id": "7d1360db-d1f3-40c1-9f05-6ab64d60f281",
            "name": "Computer Science",
            "school": "CS & IT",
            "units": [
                {
                    "course_id": "7d1360db-d1f3-40c1-9f05-6ab64d60f281",
                    "id": "36ee41ed-21b0-4311-a848-6608baea6553",
                    "level": 4,
                    "semester": 1,
                    "unit_code": "CCS 4101",
                    "unit_name": "Human Computer Interaction (HCI)"
                },
                {
                    "course_id": "7d1360db-d1f3-40c1-9f05-6ab64d60f281",
                    "id": "7492ca17-2fe6-4d17-9ac2-5119124a3716",
                    "level": 4,
                    "semester": 1,
                    "unit_code": "CCS 4103",
                    "unit_name": "Computer Security"
                },
                {
                    "course_id": "7d1360db-d1f3-40c1-9f05-6ab64d60f281",
                    "id": "91827bb6-2be8-4b0a-9bc0-af472aacc375",
                    "level": 4,
                    "semester": 1,
                    "unit_code": "CCS 4102",
                    "unit_name": "Machine Learning"
                }
            ]
        }
    ],
    "email": "w...@yahoo.com",
    "id": "daa64de5-44d5-435a-a156-08637dccb58a",
    "name": "George",
    "othernames": "",
    "role": "lecturer",
    "surname": "Mutuku"
}
</pre>
        </div>
    </section>
</body>

</html>